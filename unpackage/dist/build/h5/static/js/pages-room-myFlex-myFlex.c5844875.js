(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-room-myFlex-myFlex","pages-room-imgLog-imgLog"],{"08d0":function(t,e,n){"use strict";n("caad"),n("a9e3"),n("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={props:{top:{type:Number,default:80},bottom:{type:Number,default:100},loadingText:{type:String,default:"正在刷新"},pullingText:{type:String,default:"下拉刷新"},releaseText:{type:String,default:"释放刷新"},scrollTop:Number,scrollIntoView:String,scrollWithAnimation:{type:Boolean,default:!0},enableBackToTop:Boolean,showBackTopButton:{type:Boolean,default:!0},showScrollbar:Boolean,enableFlex:Boolean,refresherEnabled:{type:Boolean,default:!0}},data:function(){return{touch:{start:0,move:0},scrollTop2:0,backTopButtonFadeIn:!1,status:"end"}},watch:{scrollTop:{immediate:!0,handler:function(t){this.scrollTop2=t||""}}},computed:{transform:function(){return this.touch.move?"translate3d(0, ".concat(this.touch.move,"px, 0)"):""},transition:function(){return["end","loading"].includes(this.status)?"transform 0.3s":""},isReleasable:function(){return this.touch.move>=this.top},text:function(){switch(this.status){case"pulling":return this.isReleasable?this.releaseText:this.pullingText;case"loading":return this.loadingText;default:return this.pullingText}}},methods:{onTouchStart:function(t){"end"==this.status&&this.refresherEnabled&&(this.touch.start=t.changedTouches[0].clientY,this.status="pulling")},onTouchMove:function(t){if("pulling"==this.status&&this.scrollTop2<=10){var e=t.changedTouches[0].clientY-this.touch.start;e<=200&&(this.touch.move=e)}},onTouchEnd:function(t){this.isReleasable?this.down():this.end()},onScroll:function(t){this.backTopButtonFadeIn=t.detail.scrollTop>=200,this.$emit("scroll",t)},down:function(){var t=this;uni.createSelectorQuery().in(this).select(".cl-scroller__loading").fields({size:!0},(function(e){t.status="loading",t.touch.move=e.height,t.$emit("down")})).exec()},up:function(){this.$emit("up")},end:function(){this.status="end",this.touch.move=0},scrollTo:function(t){this.scrollTop2=t},backTop:function(){this.scrollTop2=Math.random()}}};e.default=o},"09f0":function(t,e,n){"use strict";function o(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,i=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done);o=!0)if(n.push(a.value),e&&n.length===e)break}catch(l){i=!0,r=l}finally{try{o||null==s["return"]||s["return"]()}finally{if(i)throw r}}return n}}n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},"0d21":function(t,e,n){"use strict";function o(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},"0f5c":function(t,e,n){"use strict";n.r(e);var o=n("f652"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},"14a4":function(t,e,n){"use strict";n.r(e);var o=n("aa0b"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},1608:function(t,e,n){"use strict";n("a9e3"),n("ac1f"),n("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("7395"),i={name:"cl-icon",props:{name:String,size:[String,Number],color:String},computed:{name2:function(){return this.name.replace("cl-icon-","")}},methods:{parseRpx:o.parseRpx}};e.default=i},"2cd3":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var o={clScroller:n("5ab4").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("cl-scroller",{ref:"scroller",staticClass:"container",attrs:{bottom:0,"scroll-y":"true"},on:{down:function(e){arguments[0]=e=t.$handleEvent(e),t.onDown.apply(void 0,arguments)}}},t._l(t.items,(function(e,o){return n("v-uni-view",{key:o},["text"==e.type?n("log",{attrs:{content:e.content,id:e.fromId}}):t._e(),"img"==e.type?n("img-log",{attrs:{ava:e.content,fromId:e.fromId}}):t._e()],1)})),1)],1)},r=[]},"2d58":function(t,e,n){"use strict";n.r(e);var o=n("aea3"),i=n("0f5c");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var a,s=n("f0c5"),l=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=l.exports},"36c0":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,".eright[data-v-556d1ff7]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\r\n\t\t/* justify-content: flex-start; */-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;\r\n\t\t/* background-color: #C8C7CC; */width:100vw\r\n\t\t/* height: 10vh; */}.eleft[data-v-556d1ff7]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\r\n\t    /* justify-content: flex-start; */-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;\r\n\t    /* background-color: #C8C7CC; */width:100vw\r\n\t    /* height: 10vh; */}.a[data-v-556d1ff7]{\r\n\t\t/* 定义flex容器 */display:-webkit-box;display:-webkit-flex;display:flex;\r\n\t\t /*设置容器内部容器的排列方向*/-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row; \r\n\t   /* height: 120upx; */\r\n\t   /* width: 100upx; */\r\n\t    /* background-color: #4CD964; */border:%?1?% solid #fff;\r\n\t\t/* padding: 10px; */margin:10px}.b[data-v-556d1ff7]{\r\n\t\t/* 定义flex容器 */display:-webkit-box;display:-webkit-flex;display:flex;\r\n\t\t /*设置容器内部容器的排列方向*/-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse; \r\n\t\t/* align-items:flex-end; */\r\n\t   /* height: 120upx; */\r\n\t   /* width: 100upx; */\r\n\t    /* background-color: #4CD964; */border:%?1?% solid #fff;\r\n\t\t/* padding: 10px; */margin:10px}.eimg[data-v-556d1ff7]{margin:5px;\r\n \t/* padding: 10px; */border-radius:10px;\r\n \t/* border: #8F8F94; */\r\n \t/* -moz-box-shadow:0 0 10px #06c; */-webkit-box-shadow:0 0 2px;\r\n     /* box-shadow:0 0 10px #06c; */width:%?75?%;height:%?75?%}.etext[data-v-556d1ff7]{margin:5px;padding:2px;border-radius:10px;\r\n \t/* border: #8F8F94; */\r\n \t/* -moz-box-shadow:0 0 10px #06c; */-webkit-box-shadow:0 0 2px;\r\n \t/* box-shadow:0 0 10px #06c; */\r\n \t/* width: 100rpx; */\r\n \t/* height: 80rpx; */width:80vw;\r\n\t/* height: 25vh; */word-break:break-all}",""]),t.exports=e},3835:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var o=s(n("0d21")),i=s(n("09f0")),r=s(n("06c5")),a=s(n("3d8c2"));function s(t){return t&&t.__esModule?t:{default:t}}function l(t,e){return(0,o.default)(t)||(0,i.default)(t,e)||(0,r.default)(t,e)||(0,a.default)()}},"3d8c2":function(t,e,n){"use strict";function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},"3dfd":function(t,e,n){"use strict";var o=n("51f1"),i=n.n(o);i.a},"415e1":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,".container[data-v-56515bf4]{position:absolute;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\n        /* justify-content: flex-start; */-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;background-color:#f3f3f3;width:100vw;height:87vh}",""]),t.exports=e},"47e4":function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{class:t.myId==t.fromId?t.eright:t.eleft},[n("v-uni-view",{class:t.fromId==t.myId?t.b:t.a},[n("img",{staticClass:"eimg",attrs:{src:t.myAva,alt:""}}),n("img",{staticClass:"etext",attrs:{src:t.ava}})])],1)],1)},r=[]},"51f1":function(t,e,n){var o=n("36c0");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=n("4f06").default;i("fbdb838c",o,!0,{sourceMap:!1,shadowMode:!1})},"53b7":function(t,e,n){"use strict";n.r(e);var o=n("aa06"),i=n("dcc4");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var a,s=n("f0c5"),l=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=l.exports},"5ab4":function(t,e,n){"use strict";n.r(e);var o=n("5e60"),i=n("c1f0");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var a,s=n("f0c5"),l=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=l.exports},"5e60":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var o={clLoading:n("e082").default,clText:n("2d58").default,clIcon:n("53b7").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"cl-scroller__wrap"},[n("v-uni-view",{staticClass:"cl-scroller__loading",style:{transform:t.transform,transition:t.transition}},[t._t("loading",["loading"==t.status?n("cl-loading",{attrs:{size:20}}):t._e(),n("cl-text",{attrs:{size:26,margin:[0,0,0,14],value:t.text}})],{text:t.text,status:t.status,move:t.touch.move})],2),n("v-uni-view",{staticClass:"cl-scroller",style:{transform:t.transform,transition:t.transition},on:{touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.onTouchMove.apply(void 0,arguments)},touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.onTouchStart.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.onTouchEnd.apply(void 0,arguments)}}},[n("v-uni-scroll-view",{staticClass:"cl-scroller__view",attrs:{"scroll-y":!0,"lower-top":t.bottom,"scroll-top":t.scrollTop2,"scroll-into-view":t.scrollIntoView,"scroll-with-animation":t.scrollWithAnimation,"enable-back-to-top":t.enableBackToTop,"show-scrollbar":t.showScrollbar,"enable-flex":t.enableFlex},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.onScroll.apply(void 0,arguments)},scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.up.apply(void 0,arguments)}}},[t._t("default")],2)],1),t.showBackTopButton?n("v-uni-view",{staticClass:"cl-scroller__back-top",class:[{fadeIn:t.backTopButtonFadeIn}],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backTop.apply(void 0,arguments)}}},[n("cl-icon",{attrs:{name:"top",color:"#666"}}),n("v-uni-text",{staticClass:"cl-scroller__back-top-text"},[t._v("顶部")])],1):t._e()],1)},r=[]},"8e97":function(t,e,n){"use strict";var o=n("b0d2"),i=n.n(o);i.a},a173:function(t,e,n){"use strict";n.r(e);var o=n("b42f"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},aa06:function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-text",{class:["cl-icon","cl-icon-"+t.name2],style:{fontSize:t.parseRpx(t.size),color:t.color}})},r=[]},aa0b:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:["ava","fromId"],data:function(){return{myId:"",uid:"",src:"",eleft:"eleft",eright:"eright",a:"a",b:"b",myAva:""}},methods:{},mounted:function(){t("log","uid=="+this.fromId," at pages/room/imgLog/imgLog.vue:31"),this.myId=uni.getStorageSync("user"),this.myAva=uni.getStorageSync("Ava"+this.fromId)}};e.default=n}).call(this,n("0de9")["log"])},aea3:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var o={clIcon:n("53b7").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"cl-text",class:[t.classList],style:{margin:t.parseRpx(t.margin),color:t.color,"font-size":"26rpx","letter-spacing":t.parseRpx(t.letterSpacing),"-webkit-line-clamp":t.ellipsis},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onTap.apply(void 0,arguments)}}},["price"==t.type?n("v-uni-text",{staticClass:"cl-text__symbol--price"},[t._v("￥")]):t._e(),t.prefixIcon?n("v-uni-text",{staticClass:"cl-text__prefix-icon"},[n("cl-icon",{attrs:{name:t.prefixIcon,size:t.fontSize}})],1):t._e(),n("v-uni-text",{staticClass:"cl-text__value",style:{fontSize:t.fontSize}},[t._v(t._s(t.d.value))]),"price"==t.type&&t.precision?n("v-uni-text",{staticClass:"cl-text__precision"},[t._v("."+t._s(t.d.precision))]):t._e(),t.suffixIcon?n("v-uni-text",{staticClass:"cl-text__suffix-icon"},[n("cl-icon",{attrs:{name:t.suffixIcon,size:t.fontSize}})],1):t._e()],1)},r=[]},b0d2:function(t,e,n){var o=n("415e1");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=n("4f06").default;i("7b00585a",o,!0,{sourceMap:!1,shadowMode:!1})},b42f:function(t,e,n){"use strict";(function(t){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=o(n("1da1")),r=o(n("af50")),a=o(n("8bf1")),s=o(n("c4cf")),l={props:["chatId","frdId"],data:function(){return{socketTask:null,is_open_socket:!1,items:[],fresh:!0,myId:"",bottom:""}},methods:{getImgList:function(e){var n=this;return(0,i.default)(regeneratorRuntime.mark((function o(){var i,r,a,s,l,c,u;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:i=e,t("log",i.length," at pages/room/myFlex/myFlex.vue:34"),r=500,a=Math.ceil(i.length/r),n.num=a,s=(new Date).getTime(),l={fromId:String(n.myId),toId:n.frdId,type:"img",num:c,id:String(n.myId)+String(n.frdId)+String(s),content:""},c=0;case 8:if(!(c<=a)){o.next=17;break}return l.num=c,l.content=0==c?a:1==c?i.substr(0,r):c==a?i.substr((c-1)*r,i.length-(c-1)*r):i.substr((c-1)*r,r),u=JSON.stringify(l),o.next=14,n.socketTask.send({data:u});case 14:c++,o.next=8;break;case 17:case"end":return o.stop()}}),o)})))()},init:function(){var e=this,n=uni.getStorageSync("user"),o=this;t("log",o.frdId," at pages/room/myFlex/myFlex.vue:67"),uni.request({url:"/web/msg/hist/"+o.frdId+"/"+n,method:"get",success:function(n){var o=n.data.data;t("log",o," at pages/room/myFlex/myFlex.vue:74");for(var i=0;i<o.length;i++)o[i].type="text",e.items.push(o[i])}})},onDown:function(){this.$refs.scroller.end()},getSrcList:function(e,n){var o={fromId:this.myId,toId:this.frdId,content:e,type:"text"};o=JSON.stringify(o),t("log",o," at pages/room/myFlex/myFlex.vue:96"),this.socketTask.send({data:o,success:function(){return(0,i.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t("log","消息发送成功"," at pages/room/myFlex/myFlex.vue:100");case 1:case"end":return e.stop()}}),e)})))()}})},connectSocketInit:function(){var e=this,n=this;this.socketTask=uni.connectSocket({url:"ws://106.15.170.74:8082/webSocket/"+n.chatId,success:function(e){t("log","websocket连接成功"," at pages/room/myFlex/myFlex.vue:114")}}),this.socketTask.onOpen((function(n){t("log","WebSocket连接正常打开中...！"," at pages/room/myFlex/myFlex.vue:120"),e.is_open_socket=!0})),this.socketTask.onClose((function(){t("log","已经被关闭了"," at pages/room/myFlex/myFlex.vue:126")})),this.socketTask.onMessage((function(e){var o=JSON.parse(e.data),i=JSON.parse(e.data).data;t("log",i.fromId," at pages/room/myFlex/myFlex.vue:135"),"text"==o.type?n.items.push({fromId:i.fromId,content:i.content,type:"text"}):"img"==o.type&&n.items.push({fromId:i.fromId,content:i.content,type:"img"})}))},closeSocket:function(){this.socketTask.close({success:function(e){this.is_open_socket=!1,t("log","关闭成功",e," at pages/room/myFlex/myFlex.vue:157")},fail:function(e){t("log","关闭失败",e," at pages/room/myFlex/myFlex.vue:160")}})},clickRequest:function(){this.is_open_socket&&this.socketTask.send({data:"请求一次发送一次message",success:function(){return(0,i.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t("log","消息发送成功"," at pages/room/myFlex/myFlex.vue:170");case 1:case"end":return e.stop()}}),e)})))()}})}},watch:{items:function(t,e){t&&(this.items=t,this.fresh=!1,this.fresh=!0)}},created:function(){},mounted:function(){this.myId=String(uni.getStorageSync("user")),this.init(),this.connectSocketInit()},beforeUpdate:function(){t("log","list before update"," at pages/room/myFlex/myFlex.vue:196")},updated:function(){t("log","list updated"," at pages/room/myFlex/myFlex.vue:200")},beforeDestroy:function(){},components:{log:r.default,inputBox:a.default,imgLog:s.default}};e.default=l}).call(this,n("0de9")["log"])},c1f0:function(t,e,n){"use strict";n.r(e);var o=n("08d0"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},c4cf:function(t,e,n){"use strict";n.r(e);var o=n("47e4"),i=n("14a4");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("3dfd");var a,s=n("f0c5"),l=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"556d1ff7",null,!1,o["a"],a);e["default"]=l.exports},d86c:function(t,e,n){"use strict";n.r(e);var o=n("2cd3"),i=n("a173");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("8e97");var a,s=n("f0c5"),l=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"56515bf4",null,!1,o["a"],a);e["default"]=l.exports},dcc4:function(t,e,n){"use strict";n.r(e);var o=n("1608"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},f652:function(t,e,n){"use strict";var o=n("4ea4");n("a15b"),n("a9e3"),n("b680"),n("acd8"),n("ac1f"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("3835")),r=n("7395"),a={name:"cl-text",props:{value:[String,Number],type:{type:String,default:"text"},encrypt:{type:Boolean,default:!0},bold:Boolean,block:Boolean,ellipsis:Number,color:{type:String,default:"#444"},size:{type:[String,Number],default:24},precision:{type:Boolean,default:!0},lineThrough:Boolean,underline:Boolean,letterSpacing:{type:[String,Number],default:0},margin:[String,Number,Array],prefixIcon:String,suffixIcon:String,copy:Boolean},computed:{d:function(){if("price"==this.type){var t=parseFloat(this.value||0).toFixed(2).split("."),e=(0,i.default)(t,2),n=e[0],o=e[1],r=void 0===o?"00":o;return this.precision?{value:n,precision:r}:{value:n}}if("phone"==this.type){var a=String(this.value);return{value:this.encrypt?a.substr(0,3)+"****"+a.substr(7):a}}return{value:this.value}},fontSize:function(){return(0,r.parseRpx)(this.size)},classList:function(){var t=[];return this.bold&&t.push("is-bold"),this.block&&t.push("is-block"),this.lineThrough&&t.push("is-line-through"),this.underline&&t.push("is-underline"),this.ellipsis>0&&t.push("is-ellipsis"),this.type&&t.push("is-".concat(this.type)),this.color&&t.push("is-color-".concat(this.color)),this.copy&&t.push("is-copy"),t.join(" ")}},methods:{parseRpx:r.parseRpx,onTap:function(t){this.$emit("click",t),this.$emit("tap",t)}}};e.default=a}}]);