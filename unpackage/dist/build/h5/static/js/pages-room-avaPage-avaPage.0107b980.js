(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-room-avaPage-avaPage"],{"029e":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var i={clDivider:n("fb64").default,clUpload:n("d316").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"myAvatar"},[n("cl-divider",[t._v("当前头像")]),n("v-uni-image",{staticStyle:{"margin-top":"5%","margin-bottom":"5%",width:"200px",height:"200px"},attrs:{src:t.src+"?key="+t.time,mode:"aspectFill"}}),n("cl-divider",[t._v("上传新头像")]),t.flag?n("cl-upload",{ref:"upload",attrs:{action:t.action,data:t.uploadData},on:{beforeUpload:function(e){arguments[0]=e=t.$handleEvent(e),t.before()},success:function(e){arguments[0]=e=t.$handleEvent(e),t.imgOnSuccess()}},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}}):t._e()],1)],1)},r=[]},1286:function(t,e,n){"use strict";var i=n("15a8"),a=n.n(i);a.a},"15a8":function(t,e,n){var i=n("feb8");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("7989af29",i,!0,{sourceMap:!1,shadowMode:!1})},1971:function(t,e,n){"use strict";n.r(e);var i=n("dbcb"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"1a29":function(t,e,n){"use strict";n.r(e);var i=n("8b82"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"3fa2":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"cl-loading",class:["cl-loading--"+t.theme],style:{height:t.size+"px",width:t.size+"px"}},["spin"==t.theme?t._l(2,(function(e){return n("v-uni-view",{key:e,staticClass:"cl-loading__spin"},[n("v-uni-text",{staticClass:"cl-loading__spin-item",style:[t.spinStyle,{top:0,left:"calc(50% - "+t.rw+"px)"}]}),n("v-uni-text",{staticClass:"cl-loading__spin-item",style:[t.spinStyle,{top:"calc(50% - "+t.rh+"px)",right:t.rh-t.rw+"px",transform:"rotate(90deg)"}]}),n("v-uni-text",{staticClass:"cl-loading__spin-item",style:[t.spinStyle,{left:"calc(50% - "+t.rw+"px)",bottom:0}]}),n("v-uni-text",{staticClass:"cl-loading__spin-item",style:[t.spinStyle,{left:t.rh-t.rw+"px",top:"calc(50% - "+t.rh+"px)",transform:"rotate(90deg)"}]})],1)})):n("v-uni-view",{staticClass:"cl-loading__inner",style:{color:t.color,borderColor:t.borderColor,borderWidth:t.borderWidth,"border-bottom":t.borderWidth+" solid currentColor"}})],2)},r=[]},5227:function(t,e,n){"use strict";(function(t){var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=i(n("1da1")),r={data:function(){return{myId:"1",action:"http://106.15.170.74:8082/user/uploadAvatar",src:"",url:"",time:"",flag:!0,uploadData:{}}},methods:{imgOnSuccess:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$axios({url:"/user/getAvatar/"+e.myId,method:"GET"}).then((function(n){t("log",n.data," at pages/room/avaPage/avaPage.vue:38"),200==n.code&&uni.setStorageSync("Ava"+e.myId,"data:image/jpeg;base64,"+n.data)}));case 2:e.time=Math.round(1e3*Math.random());case 3:case"end":return n.stop()}}),n)})))()},before:function(){}},onLoad:function(t){this.src="http://106.15.170.74:8082/"+uni.getStorageSync("myInfo").imageUrl,this.action="http://106.15.170.74:8082/user/uploadAvatar",this.uploadData={userId:1},this.myId=uni.getStorageSync("myInfo").id,setTimeout((function(){this.flag=!1}),500),this.flag=!0,this.time=Math.round(1e3*Math.random())}};e.default=r}).call(this,n("0de9")["log"])},"773a":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("7395"),a={computed:{$form:function(){return i.getParent.call(this,"ClForm",["labelWidth","labelPosition","showMessage","model","validateOnValueChange","disabled"])},isDisabled:function(){return this.$form&&this.$form.disabled||this.disabled}}};e.default=a},"871f":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var i={clLoadingMask:n("97e0").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"cl-upload-list",class:[t.classList]},[n("cl-loading-mask",{attrs:{loading:t.loading,text:"上传图片中"}}),t._l(t.urls,(function(e,i){return n("v-uni-view",{key:i,staticClass:"cl-upload",style:{height:t.size[0],width:t.size[1]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choose(i)}}},[n("v-uni-image",{directives:[{name:"show",rawName:"v-show",value:e,expression:"url"}],staticClass:"cl-upload__target",attrs:{src:t._f("format")(e),mode:t.imageMode}}),n("v-uni-text",{staticClass:"cl-upload__remove cl-icon-delete-fill",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.remove(i)}}})],1)})),t.isAppend?n("v-uni-view",{staticClass:"cl-upload",style:{height:t.size[0],width:t.size[1]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choose()}}},[n("v-uni-text",{staticClass:"cl-upload__add cl-icon-plus"})],1):t._e()],2)},r=[]},"8a78":function(t,e,n){"use strict";n("a15b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"cl-loading-mask",props:{text:String,loading:Boolean,loadingTheme:String,fullscreen:Boolean,color:String,background:{type:String,default:"rgba(255, 255, 255, 0.7)"}},computed:{classList:function(){var t=[];return this.fullscreen&&t.push("cl-loading-mask--fixed"),this.loading&&t.push("is-show"),t.join(" ")}}};e.default=i},"8b82":function(t,e,n){"use strict";var i=n("4ea4");n("4de4"),n("4160"),n("a15b"),n("a434"),n("a9e3"),n("ac1f"),n("5319"),n("1276"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var a=i(n("1da1")),r=n("7395"),o=i(n("773a")),l={name:"cl-upload",props:{value:[String,Array],sizeType:{type:Array,default:function(){return["original","compressed"]}},sourceType:{type:Array,default:function(){return["album","camera"]}},size:{type:Array,default:function(){return["200rpx","200rpx"]}},imageMode:{type:String,default:"aspectFill"},multiple:Boolean,limit:{type:Number,default:9},action:String,headers:Object,data:Object,name:{type:String,default:"file"},beforeUpload:{type:Function},disabled:Boolean,test:{type:Boolean,default:!1},autoUpload:{type:Boolean,default:!0}},mixins:[o.default],data:function(){return{loading:!1,urls:[],index:void 0}},filters:{format:function(t){return t.replace(/\\/g,"")}},watch:{value:{immediate:!0,handler:function(t){this.urls=(0,r.isArray)(t)?t:(0,r.isString)(t)?t.split(",").filter(Boolean):[]}},urls:function(t){var e=this.multiple?t:t[0];this.$emit("input",e),this.$emit("change",e)}},computed:{isAppend:function(){return this.urls.length<(this.multiple?this.limit:1)},classList:function(){var t=[];return this.isDisabled&&t.push("is-disabled"),t.join(" ")}},methods:{choose:function(t){var e=this;if(this.isDisabled)return!1;this.index=t;var n=void 0===this.index?this.limit-this.urls.length:1;if(n<=0)return this.$emit("exceed",this.urls),!1;uni.chooseImage({count:n,sizeType:this.sizeType,sourceType:this.sourceType,success:function(n){n.tempFiles.forEach(function(){var n=(0,a.default)(regeneratorRuntime.mark((function n(i){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.loading=!0,!e.beforeUpload){n.next=8;break}return n.next=4,e.beforeUpload(i,t);case 4:if(a=n.sent,!1!==a){n.next=8;break}return e.done(),n.abrupt("return");case 8:if(!e.test){n.next=12;break}return e.update(i.path),e.done(),n.abrupt("return");case 12:e.autoUpload?uni.uploadFile({url:e.action,filePath:i.path,name:e.name,header:e.headers,formData:e.data,success:function(t){var n=JSON.parse(t.data),i=n.data;e.update(i),e.$emit("success",i)},fail:function(t){e.$emit("error",t)},complete:function(){e.done()}}):e.$emit("custom-upload",i);case 13:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}})},update:function(t){void 0!==this.index?this.urls[this.index]=t:this.urls.push(t),this.done()},remove:function(t){if(this.disabled)return!1;this.urls.splice(t,1),this.$emit("remove",t)},done:function(){this.loading=!1}}};e.default=l},"8c0c":function(t,e,n){"use strict";n.r(e);var i=n("029e"),a=n("c75b");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("1286");var o,l=n("f0c5"),u=Object(l["a"])(a["default"],i["b"],i["c"],!1,null,"03cd69d2",null,!1,i["a"],o);e["default"]=u.exports},"97e0":function(t,e,n){"use strict";n.r(e);var i=n("c916"),a=n("980e");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,l=n("f0c5"),u=Object(l["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=u.exports},"980e":function(t,e,n){"use strict";n.r(e);var i=n("8a78"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},c75b:function(t,e,n){"use strict";n.r(e);var i=n("5227"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},c916:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var i={clLoading:n("e082").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"cl-loading-mask__wrap"},[n("v-uni-view",{staticClass:"cl-loading-mask",class:[t.classList],style:{background:t.background,color:t.color}},[t.loading?n("v-uni-view",{staticClass:"cl-loading-mask__content"},[n("cl-loading",{attrs:{color:t.color,"loading-theme":t.loadingTheme}}),t.text?n("v-uni-text",{staticClass:"cl-loading-mask__text"},[t._v(t._s(t.text))]):t._e()],1):t._e()],1),t._t("default")],2)},r=[]},d316:function(t,e,n){"use strict";n.r(e);var i=n("871f"),a=n("1a29");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,l=n("f0c5"),u=Object(l["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=u.exports},dbcb:function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"cl-loading",props:{color:String,borderColor:{type:String,default:"rgba(0, 0, 0, 0.1)"},borderWidth:{type:String,default:"4rpx"},theme:{type:String,default:"default"},size:{type:Number,default:25}},computed:{rh:function(){return this.size/8},rw:function(){return this.size/20},spinStyle:function(){return{height:2*this.rh+"px",width:2*this.rw+"px",color:this.color}}}};e.default=i},e082:function(t,e,n){"use strict";n.r(e);var i=n("3fa2"),a=n("1971");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,l=n("f0c5"),u=Object(l["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=u.exports},feb8:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".myAvatar[data-v-03cd69d2]{-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;width:100%;height:50%\r\n\t/* background-color: #0066CC; */}",""]),t.exports=e}}]);